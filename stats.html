<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Пошук Гравця</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
   <style>
html, body {
    margin: 0;
    padding: 0;
    height: 100%;
}

body {
    font-family: 'Poppins', sans-serif;
    background: radial-gradient(circle, #0f0f0f, #222);
    color: #EAEAEA;
    margin: 0;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    text-align: center;
    overflow-x: hidden;
}

.container {
    background: rgba(255, 255, 255, 0.1);
    padding: 40px;
    border-radius: 30px;
    box-shadow: 0 30px 70px rgba(0, 0, 0, 0.7);
    width: 100vw;
    min-height: 100vh;
    box-sizing: border-box;
    backdrop-filter: blur(30px);
    position: relative;
}

h1 {
    font-family: 'Great Vibes', cursive;
    color: #FFD700;
    margin-bottom: 30px;
    font-size: 4em;
    font-weight: 700;
    text-shadow: 0 0 20px rgba(255, 215, 0, 0.8);
}

label {
    font-size: 1.5em;
    margin: 15px 0;
    display: block;
    color: #EAEAEA;
}

input, select {
    font-size: 1.3em;
    padding: 15px 25px;
    border: 3px solid rgba(221, 221, 221, 0.6);
    border-radius: 15px;
    transition: border-color 0.4s, box-shadow 0.4s, background-color 0.4s;
    box-sizing: border-box;
    background-color: rgba(0, 0, 0, 0.4);
    color: #FFD700;
    width: calc(100% - 50px);
    margin-bottom: 20px;
}

input:focus, select:focus {
    border-color: rgba(255, 215, 0, 0.8);
    box-shadow: 0 0 30px rgba(255, 215, 0, 0.6);
    outline: none;
    background-color: rgba(0, 0, 0, 0.6);
}

button {
    background: linear-gradient(135deg, #FFD700, #FFB700);
    color: #1F1C2C;
    border: none;
    padding: 18px 35px;
    cursor: pointer;
    margin: 20px 0;
    border-radius: 20px;
    font-size: 1.5em;
    transition: background-color 0.4s, transform 0.4s, box-shadow 0.4s;
    box-shadow: 0 20px 50px rgba(255, 215, 0, 0.8);
    text-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
}

button:hover {
    background: linear-gradient(135deg, #FFB700, #FF9000);
    transform: scale(1.1);
    box-shadow: 0 25px 60px rgba(255, 215, 0, 0.9);
}

#result {
    margin-top: 30px;
    padding: 25px;
    background-color: rgba(0, 0, 0, 0.7);
    border-radius: 20px;
    box-shadow: 0 20px 50px rgba(255, 215, 0, 0.8);
    text-align: left;
    display: flex;
    flex-direction: column;
    align-items: center;
}

.card {
    background-color: rgba(0, 0, 0, 0.8);
    border-radius: 20px;
    padding: 20px;
    box-shadow: 0 20px 50px rgba(255, 215, 0, 0.8);
    width: 100%;
    max-width: 600px;
    margin-bottom: 25px;
    text-align: center;
    color: #FFD700;
    text-shadow: 0 0 15px rgba(255, 215, 0, 0.9);
    animation: glow 1.5s infinite;
}

.card h3 {
    font-size: 2.5em;
    margin-bottom: 15px;
}

.card p {
    font-size: 1.5em;
    margin: 10px 0;
}

.error, .success {
    display: flex;
    align-items: center;
    justify-content: center;
    background: rgba(255, 215, 0, 0.2);
    padding: 20px;
    border-radius: 15px;
    box-shadow: 0 20px 50px rgba(255, 215, 0, 0.7);
    margin: 15px 0;
    text-shadow: 0 0 10px rgba(255, 215, 0, 0.9);
}

.error {
    color: #FF6347;
}

.success {
    color: #32CD32;
}

.error i, .success i {
    margin-right: 15px;
}

.error i {
    color: #FF6347;
}

.success i {
    color: #32CD32;
}

.history {
    margin-top: 30px;
    text-align: left;
    color: #EAEAEA;
}

.history h3 {
    margin-bottom: 20px;
    font-size: 2.2em;
    font-weight: 700;
}

.history ul {
    list-style-type: none;
    padding: 0;
}

.history li {
    padding: 15px;
    border-radius: 15px;
    background-color: rgba(255, 215, 0, 0.2);
    margin-bottom: 15px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    box-shadow: 0 15px 40px rgba(255, 215, 0, 0.6);
    cursor: pointer;
    transition: transform 0.4s, background-color 0.4s, box-shadow 0.4s;
}

.history li:hover {
    background-color: rgba(255, 215, 0, 0.4);
    transform: translateX(10px);
    box-shadow: 0 20px 50px rgba(255, 215, 0, 0.7);
}

.history li i {
    margin-left: 15px;
    color: rgba(255, 215, 0, 0.8);
    text-shadow: 0 0 10px rgba(255, 215, 0, 0.9);
}

.awards ul {
    display: none;
}

.awards.active ul {
    display: block;
}

@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(30px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes glow {
    0% {
        text-shadow: 0 0 30px rgba(255, 215, 0, 0.8);
    }
    50% {
        text-shadow: 0 0 60px rgba(255, 215, 0, 1);
    }
    100% {
        text-shadow: 0 0 30px rgba(255, 215, 0, 0.8);
    }
}

/* Медіа-запити для адаптивності */
@media (max-width: 1200px) {
    .container {
        padding: 20px;
    }

    h1 {
        font-size: 3em;
    }

    .card {
        max-width: 90%;
        padding: 15px;
    }

    input, select {
        font-size: 1.1em;
        padding: 12px;
    }

    button {
        padding: 15px 30px;
        font-size: 1.2em;
    }
}

@media (max-width: 768px) {
    .container {
        padding: 15px;
    }

    h1 {
        font-size: 2.5em;
    }

    .card {
        max-width: 100%;
        padding: 12px;
    }

    input, select {
        font-size: 1em;
        padding: 10px;
    }

    button {
        padding: 12px 25px;
        font-size: 1.1em;
    }

    .history li {
        font-size: 0.9em;
        padding: 12px;
    }
}

@media (max-width: 480px) {
    .container {
        padding: 10px;
    }

    h1 {
        font-size: 2em;
    }

    .card {
        padding: 10px;
    }

    input, select {
        font-size: 0.9em;
        padding: 8px;
    }

    button {
        padding: 10px 20px;
        font-size: 0.9em;
    }

    .history li {
        font-size: 0.8em;
        padding: 10px;
    }
}
        .awards ul {
            display: none;
        }

        .awards.active ul {
            display: block;
        }
  </style>

</head>
<body>
    <div class="container">
        <h1>Пошук Гравця</h1>

        <label for="player-nick">Введіть нікнейм гравця:</label>
        <input type="text" id="player-nick" placeholder="Наприклад, Player123">
        
        <button onclick="searchPlayer()">Шукати</button>

        <div id="result"></div>

        <div class="history">
            <h3>Історія пошуків</h3>
            <ul id="history-list"></ul>
        </div>
        
        <button onclick="displaySavedPlayers()">Показати збережених гравців</button>
        
        <button onclick="toggleTheme()">Змінити тему</button>
    </div>

    <script>
        // Додавання теми
        function toggleTheme() {
            document.body.classList.toggle('dark-theme');
        }

        // Пошук гравця за ніком
        function searchPlayer() {
            const nick = document.getElementById('player-nick').value.trim();
            if (!nick) {
                alert('Введіть нікнейм!');
                return;
            }
            fetchPlayerData(nick);
        }

        // Функція для запиту до API і відображення результатів
        async function fetchPlayerData(nick) {
            try {
                const response = await fetch(`https://api.wotblitz.com/wotb/account/list/?application_id=337a69597cd1a9343e68ec5173bbe27d&search=${nick}`);
                const data = await response.json();

                if (data && data.status === 'ok' && data.data.length > 0) {
                    const player = data.data[0];
                    displayPlayer(player);
                    saveSearchHistory(player.nickname);
                } else {
                    displayError('Гравця не знайдено.');
                }
            } catch (error) {
                displayError('Помилка під час отримання даних.');
            }
        }

        // Відображення інформації про гравця
        function displayPlayer(player) {
            const resultDiv = document.getElementById('result');
            resultDiv.innerHTML = '';

            const playerCard = `
                <div class="card">
                    <h3>${player.nickname}</h3>
                    <p>Ідентифікатор: ${player.account_id}</p>
                    <p>Остання активність: ${player.last_battle_time || 'Не відомо'}</p>
                    <p>Дата реєстрації: ${player.created_at || 'Не відомо'}</p>
                    <div class="awards">
                        <h4 onclick="toggleAwards(this)">Нагороди <i class="fas fa-angle-down"></i></h4>
                        <ul>
                            <li>Медаль 1: 10</li>
                            <li>Медаль 2: 5</li>
                            <li>Медаль 3: 3</li>
                        </ul>
                    </div>
                </div>
            `;

            resultDiv.innerHTML = playerCard;
            displaySuccess('Гравця знайдено.');
        }

        // Зберігання історії пошуків
        function saveSearchHistory(nick) {
            let searchHistory = JSON.parse(localStorage.getItem('searchHistory') || '[]');
            const searchEntry = { nickname: nick, date: new Date().toISOString() };
            searchHistory.unshift(searchEntry);
            localStorage.setItem('searchHistory', JSON.stringify(searchHistory));
            updateHistoryList();
        }

        // Оновлення списку історії
        function updateHistoryList() {
            const historyList = document.getElementById('history-list');
            historyList.innerHTML = '';
            const searchHistory = JSON.parse(localStorage.getItem('searchHistory') || '[]');
            searchHistory.forEach(entry => {
                historyList.innerHTML += `<li onclick="fetchPlayerData('${entry.nickname}')">${entry.nickname} <i class="fas fa-history"></i></li>`;
            });
        }

        // Збереження результатів пошуку
        function savePlayer(playerData) {
            const savedPlayers = JSON.parse(localStorage.getItem('savedPlayers') || '[]');
            savedPlayers.push(playerData);
            localStorage.setItem('savedPlayers', JSON.stringify(savedPlayers));
        }

        // Відображення збережених гравців
        function displaySavedPlayers() {
            const savedPlayers = JSON.parse(localStorage.getItem('savedPlayers') || '[]');
            const resultDiv = document.getElementById('result');
            resultDiv.innerHTML = '';
            savedPlayers.forEach(player => {
                resultDiv.innerHTML += `<div class="card"><h3>${player.nickname}</h3><p>Бої: ${player.battles}</p><p>Перемоги: ${player.wins}</p></div>`;
            });
        }

        // Відображення помилок
        function displayError(message) {
            const resultDiv = document.getElementById('result');
            resultDiv.innerHTML = `<div class="error"><i class="fas fa-exclamation-triangle"></i>${message}</div>`;
        }

        // Відображення успіху
        function displaySuccess(message) {
            const resultDiv = document.getElementById('result');
            resultDiv.innerHTML = `<div class="success"><i class="fas fa-check-circle"></i>${message}</div>`;
        }

        // Відображення нагород
        function toggleAwards(element) {
            const awardsDiv = element.parentElement;
            awardsDiv.classList.toggle('active');
        }

        // Сортування історії пошуків
        function sortHistory(by) {
            const history = JSON.parse(localStorage.getItem('searchHistory') || '[]');
            if (by === 'name') {
                history.sort((a, b) => a.nickname.localeCompare(b.nickname));
            } else if (by === 'date') {
                history.sort((a, b) => new Date(b.date) - new Date(a.date));
            }
            localStorage.setItem('searchHistory', JSON.stringify(history));
            updateHistoryList();
        }

        // Фільтрація нагород
        function filterAwards(minCount) {
            const awardsList = document.querySelectorAll('.awards li');
            awardsList.forEach(award => {
                const count = parseInt(award.textContent.split(': ')[1]);
                if (count < minCount) {
                    award.style.display = 'none';
                } else {
                    award.style.display = 'block';
                }
            });
        }

        // Фільтрація за датою
        function filterByDate(minDate, maxDate) {
            const history = JSON.parse(localStorage.getItem('searchHistory') || '[]');
            const filteredHistory = history.filter(player => {
                const playerDate = new Date(player.date);
                return playerDate >= new Date(minDate) && playerDate <= new Date(maxDate);
            });
            displayFilteredHistory(filteredHistory);
        }

        // Відображення відфільтрованої історії
        function displayFilteredHistory(filteredHistory) {
            const historyList = document.getElementById('history-list');
            historyList.innerHTML = '';
            filteredHistory.forEach(entry => {
                historyList.innerHTML += `<li onclick="fetchPlayerData('${entry.nickname}')">${entry.nickname} <i class="fas fa-history"></i></li>`;
            });
        }

        // Завантаження історії при завантаженні сторінки
        document.addEventListener('DOMContentLoaded', updateHistoryList);

    </script>
</body>
</html>
